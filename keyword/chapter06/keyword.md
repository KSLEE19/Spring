# 제목 없음

## **지연로딩과 즉시로딩의 차이**

### 지연 로딩 (Lazy Loading)

▶️ 엔티티를 처음 조회할 때 연관 엔티티 데이터를 가져오지 않고, 해당 데이터가 실제로 필요한 시점에 가져오는 방식

1. 장점
    - 메모리 효율이 증가
    - 불필요한 데이터베이스 호출 감소
    - 초기 조회에서 연관 데이터를 가져오지 않기 때문에 성능 향상
2. 단점
    - 실제로 데이터를 사용할 때 추가적인 호출이 필요하므로 시스템 설계에 따라 해당 과정에서 과부하가 걸린다면 성능이 저하됨
    - 연관된 데이터를 사용하는 시점에 트랜잭션이 반드시 열려있어야 함

### 즉시 로딩 (Eager Loading)

▶️ 엔티티를 조회할 때 연관된 모든 데이터를 함께 가져오는 방식

1. 장점
    - 초기 조회 시 연관된 데이터를 함께 가져오기 때문에 이후에 추가 쿼리가 발생하지 않음
2. 단점
    - 불필요한 데이터까지 가져와서 메모리가 낭비될 수 있음
    - 연관 데이터가 많을 경우 속도가 저하됨
    - 필요하지 않은 데이터를 조회하게 되면 전체적인 성능과 효율이 감소

### 차이점

|                지연 로딩                 |   구분    |             즉시 로딩             |
|:------------------------------------:|:-------:|:-----------------------------:|
|              실제로 필요할 때               |  로딩 시점  |         처음 엔티티 조회할 때          |
|        초기 조회가 빠름, 추가 쿼리 발생 가능        |   성능    |     처음 조회가 느림, 추가 쿼리가 없음      |
|       불필요한 데이터가 없어 메모리 사용이 적음        | 메모리 사용  | 모든 데이터를 로딩하기 때문에 메모리 사용량이 증가  |
|        fetch = FetchType.LAZY        |  설정 방식  |    fetch = FetchType.EAGER    |
| 연관된 데이터를 사용할지 여부가 불확실하거나 필요하지 않은 경우  |  사용 기준  |  연관 데이터가 자주 사용되거나 항상 필요한 경우   |

## QueryDSL

▶️ JPQL을 Java 코드로 작성할 수 있도록 하는 라이브러리로 도메인 특화 언어

### 1. 특징

- 타입 안전성 : 컴파일 시점에서 검사가 되기 때문에 런타임 오류를 사전에 방지
- 도메인 특화 : 도메인 엔티티에 맞춘 쿼리를 작성할 수 있는 API를 제공
- 다양한 데이터베이스와 연계 가능

### 2. 장점

- 유연한 쿼리 작성 가능 : 복잡한 동적 쿼리를 쉽게 작성할 수 있음
- 조건 추가나 수정이 쉬어 비즈니스 로직의 가독성과 유지보수성 증가
- 타입 안전성
- JPQL과 SQL을 모두 지원하기 때문에 유연한 사용이 가능

### 3. 단점

- 설정이 복잡하고 Gradle 버전에 따른 지원 여부가 다름
- 엔티티 구조가 변경되면 Q 클래스도 다시 생성되어야 하기 때문에 추가 설정이 필요

### 4. 사용 설정

```java
dependencies {
    implementation 'com.querydsl:querydsl-jpa:5.0.0:jakarta'
    annotationProcessor 'com.querydsl:querydsl-apt:5.0.0:jakarta' // Q클래스 자동 생성
}
```

### 5. 사용 예제

```java
QMember member = QMember.member;
JPAQueryFactory queryFactory = new JPAQueryFactory(entityManager);

List<Member> members = queryFactory
        .selectFrom(member)
        .where(member.age.lt(20))  // 20살 이하 회원 조회
        .fetch();

```